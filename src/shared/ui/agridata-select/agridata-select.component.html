<div class="relative w-full">
  <button
    type="button"
    class="w-full bg-white border border-gray-300 rounded-md px-5 py-3 text-left flex justify-between items-center"
    [class.border-red-500]="hasError()"
    [class.bg-gray-100]="disabled()"
    (click)="toggleDropdown()"
    [disabled]="disabled()"
  >
    <span class="truncate">
      {{ selectedOption()?.label || placeholder() }}
    </span>
    <fa-icon [icon]="dropdownIcon()" class="ml-2 text-gray-500" />
  </button>

  @if (isDropdownOpen()) {
    <div
      class="absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"
    >
      @for (option of options(); track option.value) {
        <div
          class="flex items-center px-5 py-3 hover:bg-gray-100 cursor-pointer"
          [class.bg-gray-100]="isSelected(option.value)"
          (click)="onOptionSelect(option.value, $event)"
          (keydown.enter)="onOptionSelect(option.value, $event)"
        >
          <span>{{ option.label }}</span>
        </div>
      }
    </div>
  }
</div>
