<div
  class="border border-agridata-stroke rounded-md divide-y divide-agridata-stroke overflow-hidden"
  *i18n="let t; prefix: 'consent-request'"
>
  @for (request of consentRequests(); track request.id) {
    <div
      (click)="handleClick(request)"
      (keydown.enter)="handleClick(request)"
      class="flex flex-col gap-4 p-4 pl-6 hover:bg-agridata-primary-50 cursor-pointer group"
      [class.bg-white]="request.stateCode !== ConsentRequestStateEnum.Opened"
      [class.bg-sky-50]="request.stateCode === ConsentRequestStateEnum.Opened"
    >
      <div class="flex gap-2 xs:gap-8">
        <app-agridata-avatar
          [imageUrl]="request.dataRequest?.dataConsumerLogoBase64!"
          [name]="request.dataRequest?.dataConsumerDisplayName!"
          [size]="AvatarSize.MEDIUM"
          [skin]="AvatarSkin.LIGHT"
        />
        <span class="text-gray-800 text-lg font-semibold flex-1">
          {{ request.dataRequest?.dataConsumerDisplayName }}
        </span>
        <app-agridata-button
          click-stop-propagation
          [variant]="ButtonVariants.Icon"
          (onClick)="handleClick(request)"
        >
          <fa-icon size="xl" [icon]="faChevronRight" class="text-agridata-primary-600" />
        </app-agridata-button>
      </div>
      <span class="text-agridata-primary-600">
        {{ getTranslatedTitle(request) }}
      </span>
      <div class="flex justify-between">
        <span class="text-agridata-primary-text font-normal">
          {{ formatRequestDate(request) }}
        </span>
        <app-agridata-badge
          [text]="t(`dataRequest.stateCode.${request.stateCode}`)"
          [size]="BadgeSize.MD"
          [variant]="getBadgeVariant(request)"
        />
      </div>
    </div>
  }
</div>
