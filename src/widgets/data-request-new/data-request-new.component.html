<app-agridata-wizard
  [steps]="formControlSteps()"
  #wizard
  (onStepChange)="handleStepChange()"
  class="flex flex-col flex-1 min-h-0 relative"
>
  <div wizardContent>
    @switch (wizard.currentStepId()) {
      @case (FORM_GROUP_NAMES.DATA_CONSUMER) {
        <span>step 1</span>
      }
      @case (FORM_GROUP_NAMES.REQUEST) {
        <app-data-request-form-request [form]="form" />
      }
      @case (FORM_GROUP_NAMES.PREVIEW) {
        <span>step 3</span>
      }
      @case (FORM_GROUP_NAMES.PRODUCER) {
        <span>step 4</span>
      }
      @case (FORM_GROUP_NAMES.CONTRACT) {
        <span>step 5</span>
      }
      @case (FORM_GROUP_NAMES.COMPLETION) {
        <span>step 6</span>
      }
    }
  </div>
  <div wizardFooter class="contents">
    @if (wizard.currentStep() !== formControlSteps().length - 1) {
      <app-agridata-button
        [variant]="ButtonVariants.Secondary"
        (onClick)="handleSave(wizard.currentStepId())"
      >
        {{ 'data-request-new.saveDraft' | i18n }}
      </app-agridata-button>
      <div class="flex gap-4">
        <app-agridata-button
          [variant]="ButtonVariants.Secondary"
          (onClick)="wizard.previousStep()"
          [disabled]="wizard.currentStep() === 0"
        >
          {{ 'data-request-new.previous' | i18n }}
        </app-agridata-button>
        <app-agridata-button (onClick)="handleSave(wizard.currentStepId(), true)">
          {{ 'data-request-new.next' | i18n }}
        </app-agridata-button>
      </div>
    } @else {
      <app-agridata-button
        [variant]="ButtonVariants.Secondary"
        (onClick)="wizard.previousStep()"
        [disabled]="wizard.currentStep() === 0"
      >
        {{ 'data-request-new.previous' | i18n }}
      </app-agridata-button>
      <div class="flex gap-4">
        <app-agridata-button
          [variant]="ButtonVariants.Secondary"
          (onClick)="handleSave(wizard.currentStepId())"
        >
          {{ 'data-request-new.saveDraft' | i18n }}
        </app-agridata-button>
        <app-agridata-button (onClick)="handleSaveAndComplete()">
          {{ 'data-request-new.saveAndComplete' | i18n }}
        </app-agridata-button>
      </div>
    }
  </div>
</app-agridata-wizard>
