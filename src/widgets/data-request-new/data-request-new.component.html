<app-agridata-wizard
  [steps]="formControlSteps()"
  #wizard
  (onStepChange)="handleStepChange()"
  class="flex flex-col flex-1 min-h-0 relative"
>
  <div wizardContent>
    @switch (wizard.currentStepId()) {
      @case (FORM_GROUP_NAMES.CONSUMER) {
        <app-data-request-form-consumer [form]="form" />
      }
      @case (FORM_GROUP_NAMES.REQUEST) {
        <app-data-request-form-request [form]="form" />
      }
      @case (FORM_GROUP_NAMES.PREVIEW) {
        <app-data-request-preview [dataRequest]="dataRequest()!" />
      }
      @case (FORM_GROUP_NAMES.PRODUCER) {
        <span>step 4</span>
      }
      @case (FORM_GROUP_NAMES.CONTRACT) {
        <span>step 5</span>
      }
      @case (FORM_GROUP_NAMES.COMPLETION) {
        <span>step 6</span>
      }
    }
  </div>
  <div wizardFooter class="contents" *i18n="let t; prefix: 'data-request.wizard'">
    @if (wizard.currentStep() !== formControlSteps().length - 1) {
      <app-agridata-button
        [variant]="ButtonVariants.Tertiary"
        (onClick)="handleSave(wizard.currentStepId())"
      >
        {{ t('saveDraft') }}
      </app-agridata-button>
      <div class="flex gap-4">
        <app-agridata-button
          [variant]="ButtonVariants.Secondary"
          (onClick)="wizard.previousStep()"
          [disabled]="wizard.currentStep() === 0"
        >
          <fa-icon [icon]="previousIcon"></fa-icon>
          <span class="ml-2">{{ t('previous') }}</span>
        </app-agridata-button>
        <app-agridata-button (onClick)="handleSave(wizard.currentStepId(), true)">
          <span class="mr-2">{{ t('next') }}</span>
          <fa-icon [icon]="nextIcon"></fa-icon>
        </app-agridata-button>
      </div>
    } @else {
      <app-agridata-button
        [variant]="ButtonVariants.Secondary"
        (onClick)="wizard.previousStep()"
        [disabled]="wizard.currentStep() === 0"
      >
        {{ t('previous') }}
      </app-agridata-button>
      <div class="flex gap-4">
        <app-agridata-button
          [variant]="ButtonVariants.Secondary"
          (onClick)="handleSave(wizard.currentStepId())"
        >
          {{ t('saveDraft') }}
        </app-agridata-button>
        <app-agridata-button (onClick)="handleSaveAndComplete()">
          {{ t('saveAndComplete') }}
        </app-agridata-button>
      </div>
    }
  </div>
</app-agridata-wizard>
